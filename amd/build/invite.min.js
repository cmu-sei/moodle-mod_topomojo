define("mod_topomojo/invite",["jquery","core/config","core/log","core/modal"],(function($,config,log,Modal){var eventId;return{init:function(info){eventId=info.id;var copyButton=document.getElementById("copy_invite");copyButton&&(copyButton.onclick=function(){var textElement=document.getElementById("invitationlinkurl");if(textElement){var text=textElement.innerText||textElement.textContent||textElement.value||"";if(text){var tempInput=document.createElement("input");tempInput.type="text",tempInput.value=text,document.body.appendChild(tempInput),tempInput.select(),tempInput.setSelectionRange(0,99999);try{var successful=document.execCommand("copy");if(document.body.removeChild(tempInput),!successful)throw new Error("execCommand copy failed");Modal.create({title:"Invitation Link Copied to Clipboard",body:text,removeOnClose:!0,show:!0}).catch((function(err){log.debug(err)}))}catch(err){document.body.removeChild(tempInput),log.debug("Fallback copy method failed:",err),Modal.create({title:"Please Copy Invitation Link",body:text,removeOnClose:!0,show:!0}).catch((function(err){log.debug(err)}))}}else log.debug("No invitation link text found.")}else log.debug("Invitation link element not found.")});var generateButton=document.getElementById("generate_invite");generateButton&&(generateButton.onclick=function(){$.ajax({url:config.wwwroot+"/mod/topomojo/generateinvite.php",type:"POST",data:{sesskey:config.sesskey,id:eventId},headers:{"Cache-Control":"no-cache",Expires:"-1"},success:function(result){document.getElementById("invitationlinkurl").innerText=result.invitelinkurl,document.getElementById("copy_invite").style.display="inline"},error:function(request){log.debug("moodle-mod_topomojo-generate_invite: "+request)}})})}}}));

//# sourceMappingURL=invite.min.js.map