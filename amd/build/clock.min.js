define(["jquery","core/config","core/log"],function(a,b,c){function d(){a.ajax({url:b.wwwroot+"/mod/topomojo/extendevent.php",type:"POST",data:{sesskey:b.sesskey,id:e},headers:{"Cache-Control":"no-cache",Expires:"-1"},success:function(a){console.log("extended lab"),console.log(a),window.location.replace(window.location.href)},error:function(a){console.log("extend-event request failed"),alert("extend-event request failed"),console.log(a),c.debug("moodle-mod_topomojo-extend-event: ".request)}})}var e;return{init:function(a,b){e=b;var c=document.getElementById("extend-event");c&&(c.onclick=function(){d()},console.log("set event for extend-event button")),setInterval(function(){var b=Math.round((new Date).getTime()/1e3),c=a-b;if(c<=0){var d=document.getElementById("timer");d&&(d.innerHTML="Your time has expired",d.className="alert alert-danger")}},1e3)},countdown:function(a){setInterval(function(){var b=Math.round((new Date).getTime()/1e3),c=a-b;if(!(c<=0)){var d=Math.floor(c%86400/3600),e=Math.floor(c%3600/60),f=Math.floor(c%60),g=document.getElementById("timer");g&&(c<1800?g.className="alert alert-warning":c<300?g.className="alert alert-danger":g.className="alert alert-success",g.innerHTML="Timer: "+d.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0"))}},1e3)},countup:function(a){setInterval(function(){var b=Math.round((new Date).getTime()/1e3),c=b-a,d=Math.floor(c%86400/3600),e=Math.floor(c%3600/60),f=Math.floor(c%60),g=document.getElementById("timer");g&&(g.className="alert alert-success",g.innerHTML="Timer: "+d.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")+":"+f.toString().padStart(2,"0"))},1e3)}}});