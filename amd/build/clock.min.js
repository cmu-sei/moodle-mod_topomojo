define("mod_topomojo/clock",["jquery","core/config","core/log"],(function($,config,log){var eventid,endtime,starttime;return{init:function(start,end,id){eventid=id,endtime=end,starttime=start;var button=document.getElementById("extend-event");button&&(button.onclick=function(){$.ajax({url:config.wwwroot+"/mod/topomojo/extendevent.php",type:"POST",data:{sesskey:config.sesskey,id:eventid},headers:{"Cache-Control":"no-cache",Expires:"-1"},success:function(){endtime+=3600},error:function(request){log.debug("moodle-mod_topomojo-extend-event: "+request)}})}),setInterval((function(){var timenow=Math.round((new Date).getTime()/1e3);if(endtime-timenow<=0){var timer=document.getElementById("timer");timer&&(timer.innerHTML="Your time has expired",timer.className="alert alert-danger")}}),1e3)},countdown:function(){setInterval((function(){var timenow=Math.round((new Date).getTime()/1e3),remaining=endtime-timenow;if(!(remaining<=0)){var days=Math.floor(remaining/86400),hours=Math.floor(remaining%86400/3600),minutes=Math.floor(remaining%3600/60),seconds=Math.floor(remaining%60),timer=document.getElementById("timer");timer&&(timer.className=remaining<300?"alert alert-danger":remaining<1800?"alert alert-warning":"alert alert-success",timer.innerHTML="Timer: "+days+"d "+hours.toString().padStart(2,"0")+"h:"+minutes.toString().padStart(2,"0")+"m:"+seconds.toString().padStart(2,"0")+"s")}}),1e3)},countup:function(){setInterval((function(){var running=Math.round((new Date).getTime()/1e3)-starttime,days=Math.floor(running/86400),hours=Math.floor(running%86400/3600),minutes=Math.floor(running%3600/60),seconds=Math.floor(running%60),timer=document.getElementById("timer");timer&&(timer.className="alert alert-success",timer.innerHTML="Timer: "+days+"d "+hours.toString().padStart(2,"0")+"h:"+minutes.toString().padStart(2,"0")+"m:"+seconds.toString().padStart(2,"0")+"s")}),1e3)}}}));

//# sourceMappingURL=clock.min.js.map