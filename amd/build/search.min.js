define("mod_topomojo/search",[],(function(){const normalize=text=>(text||"").trim().toLowerCase();function bindList(listContainerEl){const searchInputEl=listContainerEl.querySelector(".lab-search"),clearButtonEl=listContainerEl.querySelector(".lab-clear"),cardsGridEl=listContainerEl.querySelector(".lab-grid"),cardEls=cardsGridEl?(root=cardsGridEl,selector=".lab-card",Array.from(root.querySelectorAll(selector))):[];var root,selector;const emptyStateEl=listContainerEl.querySelector(".lab-empty"),resultCountEl=listContainerEl.querySelector(".lab-result-count"),cardIndexes=new Map;if(cardEls.forEach((card=>{return cardIndexes.set(card,[(cardEl=card).dataset.name,cardEl.dataset.course,cardEl.dataset.tags,cardEl.dataset.competencies,cardEl.textContent].map(normalize).join(" "));var cardEl})),!searchInputEl||!cardsGridEl)return;const applyFilter=()=>{const query=normalize(searchInputEl.value);let visibleCount=0;cardEls.forEach((card=>{const matches=!query||cardIndexes.get(card).includes(query);card.style.display=matches?"":"none",matches&&visibleCount++})),emptyStateEl&&(emptyStateEl.style.display=0===visibleCount?"":"none"),resultCountEl&&(query?(resultCountEl.style.display="block",resultCountEl.textContent="".concat(visibleCount," result").concat(1===visibleCount?"":"s"," for “").concat(query,"”")):(resultCountEl.style.display="none",resultCountEl.textContent="")),clearButtonEl&&(clearButtonEl.style.display=query?"block":"none")};searchInputEl.addEventListener("input",applyFilter),clearButtonEl&&clearButtonEl.addEventListener("click",(()=>{searchInputEl.value="",applyFilter(),searchInputEl.focus()})),listContainerEl.addEventListener("keydown",(event=>{const isSlash="/"===event.key,isNotAlreadyFocused=document.activeElement!==searchInputEl;isSlash&&isNotAlreadyFocused&&(event.preventDefault(),searchInputEl.focus())}))}return{init:function(rootSelector){const selector=rootSelector||".lab-list";document.querySelectorAll(selector).forEach(bindList)}}}));

//# sourceMappingURL=search.min.js.map